{"ast":null,"code":"import _toConsumableArray from\"/Users/rickygould/Downloads/web102_unit7lab-main/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/rickygould/Downloads/web102_unit7lab-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rickygould/Downloads/web102_unit7lab-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rickygould/Downloads/web102_unit7lab-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import Card from'../components/Card';import{supabase}from'../client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReadPosts=function ReadPosts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredPosts=_useState4[0],setFilteredPosts=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchQuery=_useState6[0],setSearchQuery=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),applyFilter=_useState8[0],setApplyFilter=_useState8[1];var _useState9=useState('created_at'),_useState10=_slicedToArray(_useState9,2),sortCriteria=_useState10[0],setSortCriteria=_useState10[1];useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$supabase$from$,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return supabase.from('Posts').select('id, title, author, description, image, created_at, betCount');case 2:_yield$supabase$from$=_context.sent;data=_yield$supabase$from$.data;setPosts(data);setFilteredPosts(data);case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();fetchPosts();},[]);useEffect(function(){applyFilters();},[searchQuery,applyFilter,sortCriteria]);var applyFilters=function applyFilters(){var filtered=_toConsumableArray(posts);if(applyFilter){filtered=filtered.filter(function(post){return post.title.toLowerCase().includes(searchQuery.toLowerCase());});}if(sortCriteria==='created_at'){filtered.sort(function(a,b){return new Date(b.created_at)-new Date(a.created_at);});}else if(sortCriteria==='likes'){filtered.sort(function(a,b){return b.betCount-a.betCount;});}setFilteredPosts(filtered);};var handleSearch=function handleSearch(event){var query=event.target.value;setSearchQuery(query);};var handleApplyFilterChange=function handleApplyFilterChange(event){setApplyFilter(event.target.checked);};var handleSortChange=function handleSortChange(event){setSortCriteria(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"ReadPosts\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-options\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:applyFilter,onChange:handleApplyFilterChange}),\"Apply Filter\"]}),/*#__PURE__*/_jsxs(\"select\",{value:sortCriteria,onChange:handleSortChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"created_at\",children:\"Sort by Created Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"likes\",children:\"Sort by Likes\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title...\",value:searchQuery,onChange:handleSearch,disabled:!applyFilter}),filteredPosts.map(function(post){return/*#__PURE__*/_jsx(Link,{to:\"/post/\".concat(post.id),children:/*#__PURE__*/_jsx(Card,{id:post.id,title:post.title,author:post.author,description:post.description,image:post.image,created_at:post.created_at})},post.id);})]});};export default ReadPosts;","map":{"version":3,"names":["React","useState","useEffect","Link","Card","supabase","ReadPosts","posts","setPosts","filteredPosts","setFilteredPosts","searchQuery","setSearchQuery","applyFilter","setApplyFilter","sortCriteria","setSortCriteria","fetchPosts","from","select","data","applyFilters","filtered","filter","post","title","toLowerCase","includes","sort","a","b","Date","created_at","betCount","handleSearch","event","query","target","value","handleApplyFilterChange","checked","handleSortChange","map","id","author","description","image"],"sources":["/Users/rickygould/Downloads/web102_unit7lab-main/client/src/pages/ReadPosts.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport Card from '../components/Card';\nimport { supabase } from '../client';\n\nconst ReadPosts = () => {\n    const [posts, setPosts] = useState([]);\n    const [filteredPosts, setFilteredPosts] = useState([]);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [applyFilter, setApplyFilter] = useState(false);\n    const [sortCriteria, setSortCriteria] = useState('created_at');\n\n    useEffect(() => {\n        const fetchPosts = async () => {\n            const { data } = await supabase.from('Posts').select('id, title, author, description, image, created_at, betCount');\n            setPosts(data);\n            setFilteredPosts(data);\n        };\n\n        fetchPosts();\n    }, []);\n\n    useEffect(() => {\n        applyFilters();\n    }, [searchQuery, applyFilter, sortCriteria]);\n\n    const applyFilters = () => {\n        let filtered = [...posts];\n\n        if (applyFilter) {\n            filtered = filtered.filter(post => post.title.toLowerCase().includes(searchQuery.toLowerCase()));\n        }\n\n        if (sortCriteria === 'created_at') {\n            filtered.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n        } else if (sortCriteria === 'likes') {\n            filtered.sort((a, b) => b.betCount - a.betCount);\n        }\n\n        setFilteredPosts(filtered);\n    };\n\n    const handleSearch = (event) => {\n        const query = event.target.value;\n        setSearchQuery(query);\n    };\n\n    const handleApplyFilterChange = (event) => {\n        setApplyFilter(event.target.checked);\n    };\n\n    const handleSortChange = (event) => {\n        setSortCriteria(event.target.value);\n    };\n\n    return (\n        <div className=\"ReadPosts\">\n            <div className=\"filter-options\">\n                <label>\n                    <input type=\"checkbox\" checked={applyFilter} onChange={handleApplyFilterChange} />\n                    Apply Filter\n                </label>\n                <select value={sortCriteria} onChange={handleSortChange}>\n                    <option value=\"created_at\">Sort by Created Time</option>\n                    <option value=\"likes\">Sort by Likes</option>\n                </select>\n            </div>\n            <input\n                type=\"text\"\n                placeholder=\"Search by title...\"\n                value={searchQuery}\n                onChange={handleSearch}\n                disabled={!applyFilter}\n            />\n\n            {filteredPosts.map((post) => (\n                <Link key={post.id} to={`/post/${post.id}`}>\n                    <Card\n                        id={post.id}\n                        title={post.title}\n                        author={post.author}\n                        description={post.description}\n                        image={post.image}\n                        created_at={post.created_at}\n                    />\n                </Link>\n            ))}\n        </div>\n    );\n};\n\nexport default ReadPosts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}