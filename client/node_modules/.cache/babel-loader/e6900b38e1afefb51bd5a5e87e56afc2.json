{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rickygould/Documents/Github/Pug-Website/Downloads/web102_unit7lab-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rickygould/Documents/Github/Pug-Website/Downloads/web102_unit7lab-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/rickygould/Documents/Github/Pug-Website/Downloads/web102_unit7lab-main/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/rickygould/Documents/Github/Pug-Website/Downloads/web102_unit7lab-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/rickygould/Documents/Github/Pug-Website/Downloads/web102_unit7lab-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./CreatePost.css';import{supabase}from'../client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreatePost=function CreatePost(){var _useState=useState({title:'',author:'',description:'',image:''}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var handleChange=function handleChange(event){setPost(_objectSpread(_objectSpread({},post),{},_defineProperty({},event.target.name,event.target.value)));};var handleImageUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var file,fileData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=event.target.files[0];_context.next=3;return readFile(file);case 3:fileData=_context.sent;setPost(_objectSpread(_objectSpread({},post),{},{image:fileData}));case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleImageUpload(_x){return _ref.apply(this,arguments);};}();var createPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var timestamp;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();// Generate current timestamp\ntimestamp=new Date();_context2.next=4;return supabase.from('Posts').insert({title:post.title,author:post.author,description:post.description,image:post.image,created_at:timestamp// Add the timestamp to the inserted data\n}).select();case 4:window.location=\"/\";case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function createPost(_x2){return _ref2.apply(this,arguments);};}();// Helper function to read file as Data URL\nvar readFile=function readFile(file){return new Promise(function(resolve,reject){var reader=new FileReader();reader.onloadend=function(){resolve(reader.result);};reader.onerror=reject;reader.readAsDataURL(file);});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:post.title,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"author\",children:\"Author\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"author\",name:\"author\",value:post.author,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"5\",cols:\"50\",id:\"description\",name:\"description\",value:post.description,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",name:\"image\",onChange:handleImageUpload}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\",onClick:createPost})]})});};export default CreatePost;","map":{"version":3,"names":["React","useState","supabase","CreatePost","title","author","description","image","post","setPost","handleChange","event","target","name","value","handleImageUpload","file","files","readFile","fileData","createPost","preventDefault","timestamp","Date","from","insert","created_at","select","window","location","Promise","resolve","reject","reader","FileReader","onloadend","result","onerror","readAsDataURL"],"sources":["/Users/rickygould/Documents/Github/Pug-Website/Downloads/web102_unit7lab-main/client/src/pages/CreatePost.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './CreatePost.css';\nimport { supabase } from '../client';\n\nconst CreatePost = () => {\n    const [post, setPost] = useState({ title: '', author: '', description: '', image: '' });\n\n    const handleChange = (event) => {\n        setPost({ ...post, [event.target.name]: event.target.value });\n    };\n\n    const handleImageUpload = async (event) => {\n        const file = event.target.files[0];\n        const fileData = await readFile(file);\n        setPost({ ...post, image: fileData });\n    };\n\n    const createPost = async (event) => {\n        event.preventDefault();\n\n        // Generate current timestamp\n        const timestamp = new Date();\n\n        await supabase\n            .from('Posts')\n            .insert({ \n                title: post.title, \n                author: post.author, \n                description: post.description, \n                image: post.image,\n                created_at: timestamp // Add the timestamp to the inserted data\n            })\n            .select();\n\n        window.location = \"/\";\n    };\n\n    // Helper function to read file as Data URL\n    const readFile = (file) => {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                resolve(reader.result);\n            };\n            reader.onerror = reject;\n            reader.readAsDataURL(file);\n        });\n    };\n\n    return (\n        <div>\n            <form>\n                <label htmlFor=\"title\">Title</label> <br />\n                <input type=\"text\" id=\"title\" name=\"title\" value={post.title} onChange={handleChange} /><br />\n                <br />\n\n                <label htmlFor=\"author\">Author</label><br />\n                <input type=\"text\" id=\"author\" name=\"author\" value={post.author} onChange={handleChange} /><br />\n                <br />\n\n                <label htmlFor=\"description\">Description</label><br />\n                <textarea rows=\"5\" cols=\"50\" id=\"description\" name=\"description\" value={post.description} onChange={handleChange} />\n                <br />\n\n                <label htmlFor=\"image\">Image</label><br />\n                <input type=\"file\" id=\"image\" name=\"image\" onChange={handleImageUpload} /><br />\n                <br />\n\n                <input type=\"submit\" value=\"Submit\" onClick={createPost} />\n            </form>\n        </div>\n    );\n};\n\nexport default CreatePost;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}